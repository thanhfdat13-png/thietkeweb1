<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ƒê·ªë vui tr·∫Øc nghi·ªám ki·∫øn th·ª©c</title>
  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f4f6fb;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .quiz-container {
      background: #ffffff;
      margin: 24px;
      max-width: 640px;
      width: 100%;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      padding: 24px 28px 28px;
    }
    .quiz-header {
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 12px;
      margin-bottom: 16px;
    }
    .quiz-title {
      font-size: 22px;
      font-weight: 700;
      margin: 0;
      color: #111827;
    }
    .quiz-subtitle {
      font-size: 14px;
      color: #6b7280;
      margin-top: 4px;
    }
    .progress-wrapper {
      margin-top: 12px;
    }
    .progress-bar-bg {
      width: 100%;
      height: 8px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
    }
    .progress-bar-fill {
      height: 8px;
      width: 0%;
      background: linear-gradient(90deg, #6366f1, #22c55e);
      transition: width 0.3s ease;
    }
    .progress-text {
      font-size: 13px;
      color: #6b7280;
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
    }

    .screen {
      display: none;
    }
    .screen.active {
      display: block;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 14px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.05s ease, box-shadow 0.1s ease, background 0.1s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn-primary {
      background: #4f46e5;
      color: #ffffff;
      box-shadow: 0 4px 10px rgba(79, 70, 229, 0.35);
    }
    .btn-primary:hover {
      background: #4338ca;
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(79, 70, 229, 0.4);
    }
    .btn-secondary {
      background: #e5e7eb;
      color: #111827;
    }
    .btn-secondary:hover {
      background: #d1d5db;
    }
    .btn:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .start-screen {
      text-align: center;
      padding: 24px 4px 8px;
    }
    .start-screen h2 {
      margin-bottom: 8px;
      font-size: 20px;
      color: #111827;
    }
    .start-screen p {
      margin: 4px 0;
      font-size: 14px;
      color: #6b7280;
    }

    .question-text {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 14px;
      color: #111827;
    }
    .choices {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .choice-item {
      margin-bottom: 10px;
    }
    .choice-label {
      display: flex;
      align-items: center;
      gap: 10px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.12s ease, border-color 0.12s ease, box-shadow 0.1s ease;
    }
    .choice-label:hover {
      background: #f9fafb;
      border-color: #c7d2fe;
      box-shadow: 0 2px 6px rgba(148, 163, 184, 0.2);
    }
    .choice-label input {
      accent-color: #4f46e5;
    }
    .choice-letter {
      font-weight: 600;
      color: #4b5563;
      width: 20px;
    }

    .question-footer {
      margin-top: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .question-index {
      font-size: 13px;
      color: #6b7280;
    }

    .result-screen {
      text-align: center;
      padding-top: 16px;
    }
    .score-badge {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 24px;
      padding: 16px 24px;
      background: radial-gradient(circle at top left, #4f46e5, #22c55e);
      color: #ffffff;
      margin-bottom: 14px;
    }
    .score-main {
      font-size: 28px;
      font-weight: 800;
      line-height: 1.1;
    }
    .score-detail {
      font-size: 14px;
      opacity: 0.9;
      margin-top: 4px;
    }
    .result-message {
      font-size: 15px;
      color: #374151;
      margin-bottom: 16px;
    }

    .answer-review {
      text-align: left;
      margin-top: 12px;
      max-height: 260px;
      overflow-y: auto;
      border-top: 1px solid #e5e7eb;
      padding-top: 10px;
    }
    .answer-item {
      margin-bottom: 10px;
      font-size: 13px;
    }
    .answer-item strong {
      color: #111827;
    }
    .answer-correct {
      color: #16a34a;
      font-weight: 600;
    }
    .answer-wrong {
      color: #dc2626;
      font-weight: 600;
    }
    .answer-explanation {
      color: #6b7280;
      margin-top: 2px;
    }

    @media (max-width: 480px) {
      .quiz-container {
        margin: 12px;
        padding: 18px 16px 20px;
      }
      .quiz-title {
        font-size: 18px;
      }
      .question-text {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>

<div class="quiz-container">
  <div class="quiz-header">
    <h1 class="quiz-title">ƒê·ªë vui tr·∫Øc nghi·ªám ki·∫øn th·ª©c</h1>
    <div class="quiz-subtitle">
      Th·ª≠ xem b·∫°n nh·ªõ ƒë∆∞·ª£c bao nhi√™u ki·∫øn th·ª©c c∆° b·∫£n nh√©!
    </div>
    <div class="progress-wrapper">
      <div class="progress-bar-bg">
        <div class="progress-bar-fill"></div>
      </div>
      <div class="progress-text">
        <span class="progress-count">C√¢u 0 / 0</span>
        <span class="progress-percent">0%</span>
      </div>
    </div>
  </div>

  <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu -->
  <div class="screen start-screen active">
    <h2>B·∫Øt ƒë·∫ßu l√†m quiz</h2>
    <p>‚úî 5 c√¢u h·ªèi tr·∫Øc nghi·ªám</p>
    <p>‚úî K·∫øt qu·∫£ + gi·∫£i th√≠ch chi ti·∫øt</p>
    <p>‚úî C√≥ th·ªÉ l√†m l·∫°i nhi·ªÅu l·∫ßn</p>
    <button class="btn btn-primary btn-start">
      B·∫Øt ƒë·∫ßu ngay
    </button>
  </div>

  <!-- M√†n h√¨nh c√¢u h·ªèi -->
  <div class="screen question-screen">
    <div class="question-text"></div>
    <ul class="choices"></ul>

    <div class="question-footer">
      <div class="question-index"></div>
      <div style="display:flex; gap:6px;">
        <button class="btn btn-secondary btn-prev">‚Üê Quay l·∫°i</button>
        <button class="btn btn-primary btn-next">Ti·∫øp theo ‚Üí</button>
        <button class="btn btn-primary btn-submit" style="display:none;">N·ªôp b√†i ‚úì</button>
      </div>
    </div>
  </div>

  <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
  <div class="screen result-screen">
    <div class="score-badge">
      <div class="score-main score-text">0/0</div>
      <div class="score-detail"></div>
    </div>
    <div class="result-message"></div>
    <button class="btn btn-primary btn-restart">L√†m l·∫°i</button>

    <div class="answer-review"></div>
  </div>
</div>

<script>
  // Danh s√°ch c√¢u h·ªèi
  const questions = [
    {
      question: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† th√†nh ph·ªë n√†o?",
      choices: ["H·ªì Ch√≠ Minh", "H√† N·ªôi", "ƒê√† N·∫µng", "Hu·∫ø"],
      correctIndex: 1,
      explanation: "Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† H√† N·ªôi."
    },
    {
      question: "N∆∞·ªõc n√†o c√≥ l√° c·ªù v·ªõi v√≤ng tr√≤n ƒë·ªè tr√™n n·ªÅn tr·∫Øng?",
      choices: ["Trung Qu·ªëc", "H√†n Qu·ªëc", "Nh·∫≠t B·∫£n", "Singapore"],
      correctIndex: 2,
      explanation: "Nh·∫≠t B·∫£n c√≥ qu·ªëc k·ª≥ l√† v√≤ng tr√≤n ƒë·ªè (m·∫∑t tr·ªùi m·ªçc) tr√™n n·ªÅn tr·∫Øng."
    },
    {
      question: "H2O l√† c√¥ng th·ª©c h√≥a h·ªçc c·ªßa ch·∫•t n√†o?",
      choices: ["Mu·ªëi ƒÉn", "N∆∞·ªõc", "ƒê∆∞·ªùng", "Oxi"],
      correctIndex: 1,
      explanation: "H2O l√† c√¥ng th·ª©c h√≥a h·ªçc c·ªßa n∆∞·ªõc."
    },
    {
      question: "Trong To√°n h·ªçc, s·ªë œÄ (pi) x·∫•p x·ªâ b·∫±ng bao nhi√™u?",
      choices: ["2,14", "3,14", "1,34", "4,13"],
      correctIndex: 1,
      explanation: "œÄ (pi) th∆∞·ªùng ƒë∆∞·ª£c l√†m tr√≤n l√† 3,14."
    },
    {
      question: "Tr√°i ƒê·∫•t quay quanh M·∫∑t Tr·ªùi trong kho·∫£ng bao l√¢u?",
      choices: ["1 ng√†y", "1 tu·∫ßn", "1 th√°ng", "1 nƒÉm"],
      correctIndex: 3,
      explanation: "Tr√°i ƒê·∫•t quay 1 v√≤ng quanh M·∫∑t Tr·ªùi kho·∫£ng 1 nƒÉm (365 ng√†y)."
    }
  ];

  let currentIndex = 0;          // ƒëang ·ªü c√¢u th·ª© m·∫•y
  let userAnswers = [];          // m·∫£ng l∆∞u ƒë√°p √°n ng∆∞·ªùi d√πng

  $(document).ready(function () {
    const $startScreen = $(".start-screen");
    const $questionScreen = $(".question-screen");
    const $resultScreen = $(".result-screen");

    const $questionText = $(".question-text");
    const $choicesList = $(".choices");
    const $questionIndex = $(".question-index");

    const $btnStart = $(".btn-start");
    const $btnPrev = $(".btn-prev");
    const $btnNext = $(".btn-next");
    const $btnSubmit = $(".btn-submit");
    const $btnRestart = $(".btn-restart");

    const $progressFill = $(".progress-bar-fill");
    const $progressCount = $(".progress-count");
    const $progressPercent = $(".progress-percent");

    const $scoreText = $(".score-text");
    const $scoreDetail = $(".score-detail");
    const $resultMessage = $(".result-message");
    const $answerReview = $(".answer-review");

    function updateProgress() {
      const total = questions.length;
      const current = currentIndex + 1;
      $progressCount.text(`C√¢u ${current} / ${total}`);
      const percent = Math.round((current / total) * 100);
      $progressPercent.text(percent + "%");
      $progressFill.css("width", percent + "%");
    }

    function renderQuestion() {
      const q = questions[currentIndex];
      $questionText.text(q.question);

      $choicesList.empty();
      const letters = ["A", "B", "C", "D", "E", "F"];
      q.choices.forEach((choice, idx) => {
        const id = `q${currentIndex}_choice${idx}`;
        const isChecked = userAnswers[currentIndex] === idx;

        const $li = $(`
          <li class="choice-item">
            <label class="choice-label" for="${id}">
              <span class="choice-letter">${letters[idx] || ""}</span>
              <input type="radio" name="question-${currentIndex}" id="${id}" value="${idx}">
              <span>${choice}</span>
            </label>
          </li>
        `);

        if (isChecked) {
          $li.find("input").prop("checked", true);
        }

        $choicesList.append($li);
      });

      $questionIndex.text(`C√¢u ${currentIndex + 1} / ${questions.length}`);

      // N√∫t prev/next/submit
      if (currentIndex === 0) {
        $btnPrev.prop("disabled", true);
      } else {
        $btnPrev.prop("disabled", false);
      }

      if (currentIndex === questions.length - 1) {
        $btnNext.hide();
        $btnSubmit.show();
      } else {
        $btnNext.show();
        $btnSubmit.hide();
      }

      updateProgress();
    }

    function calculateScore() {
      let correctCount = 0;
      questions.forEach((q, idx) => {
        if (userAnswers[idx] === q.correctIndex) {
          correctCount++;
        }
      });
      return correctCount;
    }

    function renderResult() {
      const correctCount = calculateScore();
      const total = questions.length;
      $scoreText.text(`${correctCount}/${total}`);

      const percent = Math.round((correctCount / total) * 100);
      $scoreDetail.text(`B·∫°n ƒë√∫ng ${correctCount} tr√™n ${total} c√¢u (${percent}%).`);

      let message = "";
      if (percent === 100) message = "Tuy·ªát v·ªùi! B·∫°n n·∫Øm ki·∫øn th·ª©c r·∫•t v·ªØng üéâ";
      else if (percent >= 70) message = "Kh√° t·ªët! B·∫°n ch·ªâ c·∫ßn √¥n l·∫°i m·ªôt ch√∫t n·ªØa th√¥i.";
      else if (percent >= 40) message = "·ªîn, nh∆∞ng b·∫°n n√™n xem l·∫°i c√°c c√¢u sai ƒë·ªÉ nh·ªõ l√¢u h∆°n.";
      else message = "Kh√¥ng sao, l√†m l·∫°i l·∫ßn n·ªØa l√† s·∫Ω l√™n tr√¨nh ngay! üí™";

      $resultMessage.text(message);

      // Hi·ªÉn th·ªã chi ti·∫øt t·ª´ng c√¢u
      $answerReview.empty();
      questions.forEach((q, idx) => {
        const userAns = userAnswers[idx];
        const isCorrect = userAns === q.correctIndex;
        const letters = ["A", "B", "C", "D", "E", "F"];
        const userText = userAns != null ? letters[userAns] + ". " + q.choices[userAns] : "Ch∆∞a ch·ªçn";
        const correctText = letters[q.correctIndex] + ". " + q.choices[q.correctIndex];

        const $item = $(`
          <div class="answer-item">
            <div><strong>C√¢u ${idx + 1}:</strong> ${q.question}</div>
            <div>
              B·∫°n ch·ªçn: 
              <span class="${isCorrect ? "answer-correct" : "answer-wrong"}">
                ${userText}
              </span>
            </div>
            <div>ƒê√°p √°n ƒë√∫ng: <span class="answer-correct">${correctText}</span></div>
            <div class="answer-explanation">${q.explanation}</div>
          </div>
        `);

        $answerReview.append($item);
      });
    }

    function showScreen(screenName) {
      $(".screen").removeClass("active");
      if (screenName === "start") $startScreen.addClass("active");
      if (screenName === "question") $questionScreen.addClass("active");
      if (screenName === "result") $resultScreen.addClass("active");
    }

    // ====== S·ª± ki·ªán ======
    $btnStart.on("click", function () {
      currentIndex = 0;
      userAnswers = new Array(questions.length).fill(null);
      showScreen("question");
      renderQuestion();
    });

    $choicesList.on("change", "input[type=radio]", function () {
      const selectedIndex = parseInt($(this).val(), 10);
      userAnswers[currentIndex] = selectedIndex;
    });

    $btnPrev.on("click", function () {
      if (currentIndex > 0) {
        currentIndex--;
        renderQuestion();
      }
    });

    $btnNext.on("click", function () {
      if (currentIndex < questions.length - 1) {
        currentIndex++;
        renderQuestion();
      }
    });

    $btnSubmit.on("click", function () {
      // C√≥ th·ªÉ check xem ƒë√£ ch·ªçn h·∫øt ch∆∞a, tu·ª≥ b·∫°n
      showScreen("result");
      updateProgress();
      $progressPercent.text("100%");
      $progressFill.css("width", "100%");
      $progressCount.text(`Ho√†n th√†nh`);
      renderResult();
    });

    $btnRestart.on("click", function () {
      currentIndex = 0;
      userAnswers = new Array(questions.length).fill(null);
      showScreen("question");
      renderQuestion();
    });

    // Kh·ªüi t·∫°o progress (m√†n h√¨nh start)
    $progressCount.text(`C√¢u 0 / ${questions.length}`);
    $progressPercent.text("0%");
    $progressFill.css("width", "0%");
  });
</script>

</body>
</html>
